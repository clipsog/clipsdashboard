services:
  # Dashboard Web Service
  - type: web
    name: clipsdashboard
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: python dashboard_server.py
    healthCheckPath: /health
    envVars:
      - key: PYTHON_VERSION
        value: 3.10.0
      - key: PORT
        sync: false  # Render will set this automatically
      # NOTE: DATABASE_URL should be set in Render Dashboard Environment Variables
      # Go to: Render Dashboard > Your Service > Environment > Add Environment Variable
      # Name: DATABASE_URL
      # Value: postgresql://postgres.sthmpgvzdcmveihmqjpl:MJmCf99X$$$@aws-1-us-east-2.pooler.supabase.com:6543/postgres
      # (The password contains $$$ which needs to be set directly, not in YAML)
  
  # Continuous Ordering Worker Service (CRITICAL - keeps ordering until goals reached!)
  - type: worker
    name: ordering-service
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: python continuous_ordering_service.py
    envVars:
      - key: PYTHON_VERSION
        value: 3.10.0
      # DATABASE_URL will be inherited from environment